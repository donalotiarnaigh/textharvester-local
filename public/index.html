<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Historic Graves Text Harvester</title>
    <!-- Include Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />
    <!-- Custom CSS (if needed) -->
    <style>
      .container {
        padding-top: 20px;
      }
      .instructions {
        margin-bottom: 20px;
      }
    </style>
    <link rel="icon" href="/images/favicon.ico" type="image/x-icon" />
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <div class="row mb-4">
        <div class="col">
          <h1 class="text-center">Historic Graves Text Harvester</h1>
        </div>
      </div>

      <!-- Instructions Box -->
      <div class="row">
        <div class="col-12 col-md-8 offset-md-2">
          <div class="card instructions">
            <div class="card-body">
              <h5 class="card-title">Instructions</h5>
              <p class="card-text">
                <strong>How to Use Historic Graves TextHarvester:</strong><br />
                1. <b>Select and Upload Your Image(s):</b> Click "Choose JPG
                file" to select a JPEG image with memorial inscription text.
                Click "Harvest" to upload and process the image.<br />
                2. <b>Wait for Processing:</b> You'll be redirected to a
                processing page where you can monitor progress. Feel free to
                leave it running in the background.<br />
                3. <b>View Results:</b> Once processed, you'll automatically go
                to the results page. Here, you'll see extracted text, focusing
                on 'Memorial Number' and 'Inscription'. Use "Download Results"
                to get the data in JSON format or click the copy icon to copy
                the output text to your clipboard.<br />
                <i
                  >Tip: For best results, use high-contrast images with
                  block/non-cursive handwriting.</i
                >
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- File Upload Section -->
      <div class="row">
        <div class="col-12 col-md-8 offset-md-2">
          <form
            id="uploadForm"
            method="POST"
            action="/upload"
            enctype="multipart/form-data"
          >
            <div class="form-group">
              <!-- File selection button -->
              <label for="fileUpload" class="btn btn-primary btn-block"
                >Choose JPG file</label
              >
              <input
                type="file"
                id="fileUpload"
                name="file"
                class="form-control-file"
                accept=".jpg, .jpeg"
                multiple
                hidden
              />

              <small id="file-chosen" class="form-text text-muted"
                >No file chosen</small
              >
            </div>
            <!-- Upload button -->
            <button id="uploadButton" class="btn btn-success btn-block">
              Harvest
            </button>
          </form>
        </div>
      </div>
    </div>

    <!-- Include Bootstrap and jQuery Scripts -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <!-- Custom Script for File Selection -->
    <script>
      document
        .getElementById("fileUpload")
        .addEventListener("change", function () {
          let fileNames = [];
          for (let i = 0; i < this.files.length; i++) {
            fileNames.push(this.files[i].name);
          }
          document.getElementById("file-chosen").textContent =
            fileNames.join(", ");
        });
    </script>
  </body>
</html>
