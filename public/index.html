<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Historic Graves Text Harvester</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <!-- Custom CSS (if needed) -->
    <style>
        .container {
            padding-top: 20px;
        }
        .instructions {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="row mb-4">
            <div class="col">
                <h1 class="text-center">Historic Graves Text Harvester</h1>
            </div>
        </div>
        
        <!-- Instructions Box -->
        <div class="row">
            <div class="col-12 col-md-8 offset-md-2">
                <div class="card instructions">
                    <div class="card-body">
                        <h5 class="card-title">Instructions</h5>
                        <p class="card-text">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc maximus, nulla ut commodo sagittis, sapien dui mattis dui, non pulvinar lorem felis nec erat</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- File Upload Section -->
        <div class="row">
            <div class="col-12 col-md-8 offset-md-2">
                <form id="uploadForm">
                    <div class="form-group">
                        <label for="fileUpload" class="btn btn-primary btn-block">Choose file</label>
                        <input type="file" id="fileUpload" class="form-control-file" hidden>
                        <small id="file-chosen" class="form-text text-muted">No file chosen</small>
                    </div>
                    <button type="submit" class="btn btn-success btn-block">Harvest</button>
                </form>
            </div>
        </div>
    </div>
    
    <!-- Bootstrap and jQuery Scripts -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <!-- Custom Script for dynamic content change -->
    <script>
        document.getElementById('uploadForm').addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent the form from submitting normally
            goToProcessingState(); // Call the function to change the page content
        });

        function goToProcessingState() {
            // Update the instructions text
            document.querySelector('.card-text').textContent = 'Your file is being processed. Please wait.';

            // Hide the file input and Harvest button
            document.querySelector('form').style.display = 'none';

            // Create the progress bar and file processing status elements
            var processingDiv = document.createElement('div');
            processingDiv.innerHTML = `
                <div class="row">
                    <div class="col-12 col-md-8 offset-md-2 text-center">
                        <p id="fileName">chosenFile.pdf</p>
                        <div class="progress">
                            <div class="progress-bar" role="progressbar" style="width: 30%;" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100">30%</div>
                        </div>
                        <p id="fileProgress">4/12</p>
                        <p id="timeRemaining">4 - 5 mins remaining...</p>
                    </div>
                </div>
            `;

            // Append the new content to the container
            var container = document.querySelector('.container');
            container.appendChild(processingDiv);
        }

        // Function to update file chosen text
        document.getElementById('fileUpload').addEventListener('change', function() {
            var fileName = this.files[0].name; // Get the file name
            document.getElementById('file-chosen').textContent = fileName; // Replace the "No file chosen" label
        });
    </script>
</body>
</html>
